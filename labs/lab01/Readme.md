# Лабораторная работа 2. Просмотр таблицы MAC-адресов коммутатора.
## Задачи:
### Часть 1. Создание и настройка сети.
- #### Подключение сети в соответствии с топологией.
- #### Настройка узлов ПК.
- #### Выполнение инициализации и перезагрузки коммутаторов.
- #### Настройка базовых параметров каждого коммутатора.
### Часть 2. Изучение таблицы MAC-адресов коммутатора.
- #### Запись MAC-адресов сетевых устройств.
- #### Просмотр таблицы MAC-адресов коммутатора.
- #### Очистка таблицы MAC-адресов коммутатора S2 и повторное отображение таблицы MAC-адресов.
- #### Отправка эхо-запросов с компьютера PC-B устройствам в сети и просмотр таблицы MAC-адресов коммутатора.
### Топология:
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_35.jpg)

## Приступим к выполнению:
## Часть 1. Создание и настройка сети.
### Шаг 1. Создание сети согласно топологии.
- #### Подключив порт "FastEthernet 0/0" PC-A к порту "FastEthernet 0/6" коммутатора S1, а так же порт "FastEthernet 0/0" PC-B к порту "FastEthernet 0/18" коммутатора S2, соединим порты "FastEthernet 0/1" коммутаторов между собой с помощью прямого кабеля Ethernet. Интерфейсы Fast Ethernet на коммутаторах Cisco 2960 определяют тип подключения автоматически, поэтому между коммутаторами S1 и S2 можно использовать прямой кабель Ethernet. При использовании коммутатора Cisco другой модели может потребоваться перекрестный кабель Ethernet т.к. коммутаторы находятся на одном уровне модели OSI - канальном.
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_36.png)

### Шаг 2. Настроим IP-адреса PC-A и PC-B, перейдя в окно "IP Confoguration" на рабочем столе каждого конечного узла. 
- #### Для PC-A:
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_37.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_38.png)

- #### Аналогично для PC-B:
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_39.png)

### Шаг 3. Выполним инициализацию и перезагрузку коммутаторов S1 и S2, подключившись к ним через консольные порты с PC-A и PC-B соответственно. 
- #### Для перезагрузки используем команду "reload" в терминалах PC-A и PC-B. Для S1:
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_40.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_41.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_42.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_43.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_44.png)

- #### В консольном терминале коммутатора S2 после перезагрузки инициализируются следующие порты: 
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_45.png)

### Шаг 4. Настройка базовых параметров каждого коммутатора.
- #### Настроим имена устройств в соответствии с топологией. Коммутатору, соединенному консольным кабелем с PC-A, назначим имя "S1".
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_46.png)

**Коммутатору, соединенному с PC-B - "S2".**

![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_47.png)

- #### Настроим IP-адреса для виртуальных интерфейсов SVI сетей VLAN коммутаторов S1 и S2 как указано в таблице адресации. Для коммутатора S1:
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_48.png)

**Для коммутатора S2:**

![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_49.png)

- #### Назначим пароли консольного подключения и vty. В качестве пароля будем использовать "cisco". Для консольного порта "console 0", а так же всех виртуальных интерфейсов vty коммутатора S1:
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_50.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_52.png)

**Аналогично для коммутатора S2:**

![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_51.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_53.png)

- #### Назначение пароля для привилегированного режима EXEC. Не забудем включить шифрование паролей чтобы скрыть их от посторонних глаз. Для коммутатора S1:
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_54.png)

**Аналогично для коммутатора S2:**

![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_55.png)

## Часть 2. Изучение таблицы MAC-адресов коммутатора.
### Шаг 1. Запись MAC-адресов сетевых устройств
- #### Для того, что бы узнать MAC-адреса хостов для адаптера Ethernet, откроем командную строку на PC-A и PC-B и введем команду "ipconfig /all". MAC-адрес PC-A: 00.E0.8F.22.36.52. MAC-адрес PC-B: 00.01.96.13.56.2E.
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_56.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_57.png)

- #### Подключимся по очереди к каждому коммутатору (S1 и S2) через консольные порты с PC-A и PC-B соответственно. Для того, что бы узнать MAC-адреса коммутаторов для портов FastEthernet 0/1, выполним в терминале каждого коммутатора команду "show interface f0/1" в привилегированном режиме. Для S1 это 00.0c.cf.d2.84.01, а для S2: 00.60.5c.4a.66.01.
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_58.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_59.png)

### Шаг 2. Просмотр таблицы MAC-адресов коммутатора.
- #### До тестирования связи с помощью эхо-запросов просмотрим таблицу MAC-адресов коммутатора S2, подключившись к нему через консольный порт и выполнив команду "show mac address-table" в привилегированном режиме EXEC. В таблице MAC-адресов коммутатора S2 на данный момент находится только запись о MAC-адресе, подключенного к его порту f 0/1, коммутатора S1.
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_61.png)

- #### Определить, кому принадлежит конкретный адрес из таблицы MAC-адресов только с помощью команды "show mac address-table" наверняка, затруднительно. Следует прежде установить соответствие каждого устройства с его MAC-адресом, как мы это сделали в Шаге 1. Получается, использование лишь этой команды в любой ситуации не работает. Однозначно мы можем определить только MAC-адреса тех оконечных устройств, которые находятся в локальной сети нашего коммутатора S2, ибо MAC-адреса хостов будут иметь привязку к конкретным портам коммутатора, объединяющего их в локальную подсеть. Таким образом, зная, какой ПК подключен к какому порту нашего коммутатора S2 (например PC-B к f 0/18), можно, в соответствии с этим, определить его MAC-адрес в таблице коммутации, разумеется, после осуществления эхо-запроса. После эхо-запроса так же запишется адрес пингуемого устройства, подключенного к общей сети через коммутатор S1 (в данном случае PC-A), но однозначно мы его определить не смогли бы, если бы мы прежде не отобразили MAC-адрес соседнего коммутатора, как в данном случае. Так как информация от каждого устройства соседней локальной сети, в т.ч. и от соседнего коммутатора S1, приходит на один и тот же порт коммутатора S2 - f 0/1, то соответствия "устройство - порт подключения" для оконечных узлов коммутатора S1 в таблице MAC-адресов коммутатора S2 установить не удастся.
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_62.png) 

### Шаг 3. Очистка таблицы MAC-адресов коммутатора S2, а затем повторное ее отображение.
- #### Для очистки таблицы MAC-адресов коммутатора S2 выполним команду "clear mac address-table dynamic" в терминале консольного подключения. 

- #### Затем быстро выполним команду "show mac address-table" снова, тем самым отобразив очищенную таблицу MAC-адресов коммутатора S2. MAC-адресов для VLAN 1 или каких-либо других в данной таблице нет. 
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_63.png)

**Введя команду "show mac address-table" повторно через 10 секунд, увидим, что в таблице MAC-адресов коммутатора S2 появился MAC-адрес соседнего коммутатора S1, соединенного с портом f 0/1 коммутатора S2. Таким образом, коммутаторы, при соединении друг с другом, записывают MAC-адреса каждого соседнего коммутатора даже до отправки эхо-запросов утилитой ping с оконечных устройств**

![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_64.png)

### Шаг 4. Отправка эхо-запросов с PC-B устройствам в сети и просмотр таблицы MAC-адресов коммутатора S2.
- #### Выполним команду "arp -a" в командной строке компьютера PC-B. До осуществления эхо-запросов никаких соответствий IP-адресов MAC-адресам устройств в сети протокол ARP для PC-B не выявил.
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_65.png)

- #### Отправим эхо-запросы из командной строки PC-B на PC-A, а так же на коммутаторы S1 и S2. При этом поднимем наши интерфейсы VLAN 1 на каждом коммутаторе командой "no shutdown".
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_69.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_66.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_67.png)
![](https://github.com/OlegLarionov999/Images/blob/main/Screenshot_68.png)
